<!DOCTYPE html>
{% load staticfiles %}

<html>
<head>
    <title>{% block title %}Try Django 1.9{% endblock %}</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="{% static 'posts/css/style.css' %}">

    <style>
        {% block style %}{% endblock %}
    </style>

{% block head_extra %}{% endblock %}
</head>
<body>
<div class="container">
<div id="fb-root"></div>

<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.6&appId=1568773046695203";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

{% include 'posts/messages.html' %}

{% block content %}
{% endblock %}
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.5/marked.min.js"></script>

<script>
$(document).ready(function() {

    function setContent(value) {
        $('#preview-content').html(marked(value));
        $('#preview-content img').each(function() {
            $(this).addClass('img-responsive');
        });
    }

    function setTitle(value) {
        $('#preview-title').text(value);
    }

    $('.comment-reply-btn').click(function(event) {
        event.preventDefault();
        $(this).parent().next('.comment-reply').fadeToggle();
    });

    $('.content-markdown').each(function() {
        var content = $(this).text();
        $(this).html(marked(content))
    });
    $('.post-detail-item img').each(function() {
        $(this).addClass('img-responsive');
    });

    var titleInput = $('#id_title');
    setTitle(titleInput.val());

    var contentInput = $('#id_content');
    setContent(contentInput.val());

    contentInput.keyup(function() {
        setContent($(this).val());
    });

    titleInput.keyup(function() {
        setTitle($(this).val());
    });

})
</script>
</body>
</html>
